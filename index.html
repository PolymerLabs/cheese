<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <title>snap ai</title>

  <link rel="shortcut icon" sizes="32x32" href="/images/snap-icon-32.png">
  <meta name="theme-color" content="#000">
  <link rel="manifest" href="/manifest.json">

  <link rel="import" href="/src/snap-app.html" async>

  <style>

    body {
      margin: 0;
      font-family: 'Roboto', 'Noto', sans-serif;
      min-height: 100%;
      background-color: #000;
    }

    header {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      text-align: center;
      transform: translateZ(0);
      z-index: 1;
      background-color: rgba(0, 0, 0, 0.3);
    }

    header > label {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      height: 64px;
      margin: 0;
      padding: 0;
      font-weight: 600;
      font-size: 18px;
      letter-spacing: 5px;
      color: #ccc;
      -webkit-user-select: none;
      user-select: none;
      filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.8));
    }

    .header-camera-icon {
      padding: 0 8px 0 4px;
    }

    .camera-button {
      position: fixed;
      bottom: 24px;
      left: calc(50% - 36px);
      width: 72px;
      height: 72px;
      z-index: 1;
      filter: drop-shadow(0px 1px 1px rgba(0,0,0,0.8));
    }

    .camera-button > label {
      position: absolute;
      top: 0;
      left: calc(50% - 50vw);
      width: 100vw;
      opacity: 0;
      text-align: center;
      white-space: nowrap;
      color: white;
    }

    .camera-button > input[type="file"],
    .camera-button > svg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
    }

    .camera-button > svg {
      padding: 10px;
      border: 6px solid #FFF;
      box-sizing: border-box;
      background-color: black;
      pointer-events: none;
    }
  
    .image-placeholder {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      fill: #333;
    }

    .camera-button.idle {
      will-change: transform;
      animation: snap-bounce 5s linear infinite;
    }

    .camera-button.idle > label {
      will-change: opacity, transform;
      animation: snap-appear 5s ease-in-out forwards;
    }

    @keyframes snap-bounce {
      /* loop 1 */
      83% {
        transform: translateY(0);
      }
      85% {
        transform: translateY(-30px);
      }
      88% {
        transform: translateY(0);
      }
      /* loop 2 */
      88% {
        transform: translateY(0);
      }
      91% {
        transform: translateY(-30px);
      }
      94% {
        transform: translateY(0);
      }
      /* loop 3 */
      94% {
        transform: translateY(0);
      }
      97% {
        transform: translateY(-30px);
      }
      100% {
        transform: translateY(0);
      }
    }

    @keyframes snap-appear {
      65% {
        transform: scale(0.6) translateY(-30px);
        opacity: 0;
      }
      70% {
        transform: scale(1) translateY(-35px);
        opacity: 1;
      }
      100% {
        transform: scale(1) translateY(-35px);
        opacity: 1;
      }
    }

  </style>

</head>
<body>

  <snap-app api-key="AIzaSyCG3rPxfQu1ntULMM4TUmIrQyxPEcJsZLk">
    <header>
      <label>
        <span>snap</span>
        <svg class="header-camera-icon" fill="#FFF" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
          <path d="M12 17l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z"/>
        </svg>
        <span>ai</span>
      </label>
    </header>

    <svg class="image-placeholder" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
    </svg>

    <div class="camera-button idle" onclick="this.classList.remove('idle')">
      <label for="fileInput">Take a selfie!</label>
      <input id="fileInput" type="file" accept="image/*" capture="user">
      <svg fill="#FFF" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M9 3L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2h-3.17L15 3H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"/>
        <path d="M12 17l1.25-2.75L16 13l-2.75-1.25L12 9l-1.25 2.75L8 13l2.75 1.25z"/>
      </svg>
    </div>
  </snap-app>

  <script src="/bower_components/webcomponentsjs/webcomponents-loader.js"></script>

  <script>
    window.addEventListener('load', function() {
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js');
      }
    });
  </script>

</body>
</html>
